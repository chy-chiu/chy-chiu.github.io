
<!DOCTYPE html>
  <html>
  <head>
  <meta charset="UTF-8">
  <title>Static Website Generator for Obsidian Markdown</title>
  <style>
  img {
    max-width: 100%;
  }
  .messages {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  .message {
    display: flex;
    flex-direction: column;
    gap: 10px;
    border: 1px solid #ccc;
    padding: 10px;
    border-radius: 5px;
  }
  </style>
  </head>
  <body>
    <div class="messages">
    
      <div class="message">
      <div class="message-role">
        <strong>user</strong>
      </div>
      <div class="message-content">
      
      I want you to help me design a static website generator that can convert a bunch of obsidian markdown files with internal wiki links etc.
if possible, no javascript other than stuff like mathjax rendering
otherwise html css only
one example is ai-folio which is a jekyll builder, are you aware? 

main pages:
- About, Research, Writing, Notes

- Feature
1. top navigation bar
2. tag system
3. About, Research are statically rendered
4. writing / notes take in one folder each
5. can customise stuff like colors, font after (make it easily configurable maybe)

no code first ask me clarifying questions first to refine the spec
      </div>
      </div>
      
      <div class="message">
      <div class="message-role">
        <strong>anthropic-claude-4.5-opus</strong>
      </div>
      <div class="message-content">
      
      <h1>Clarifying Questions</h1>
<p>Good problem â€” I&#39;m familiar with al-folio (Jekyll-based academic portfolio theme). Let me ask some questions before we design:</p>
<h2>Obsidian-Specific Features</h2>
<ol>
<li><p><strong>Wiki links</strong>: Do you need <code>[[page|alias]]</code> support, or just basic <code>[[page]]</code>? Should broken links fail the build or render as plain text?</p>
</li>
<li><p><strong>Embeds</strong>: Do you use <code>![[note]]</code> to embed other notes? (This gets complex without JS)</p>
</li>
<li><p><strong>Tags</strong>: Are you using inline <code>#tag</code> syntax, YAML frontmatter tags, or both?</p>
</li>
<li><p><strong>Callouts/Admonitions</strong>: Do you use Obsidian&#39;s <code>&gt; [!note]</code> syntax?</p>
</li>
<li><p><strong>Images/Attachments</strong>: Where do these live â€” scattered in folders, or a central <code>assets/</code> folder?</p>
</li>
</ol>
<h2>Content Structure</h2>
<ol start="6">
<li><p><strong>Writing vs Notes</strong>: What&#39;s the conceptual difference? (e.g., polished essays vs working notes, dated vs evergreen?)</p>
</li>
<li><p><strong>Ordering</strong>: Chronological by date? Alphabetical? Manual ordering?</p>
</li>
<li><p><strong>Nested folders</strong>: Do your Writing/Notes folders have subfolders you want to preserve?</p>
</li>
</ol>
<h2>Technical</h2>
<ol start="9">
<li><p><strong>Generator language preference</strong>: Python? Go? Something else? (Affects who can contribute/maintain)</p>
</li>
<li><p><strong>Hosting target</strong>: GitHub Pages? Netlify? (Affects build pipeline)</p>
</li>
<li><p><strong>Research page content</strong>: Publications with BibTeX? Project cards? Or just prose?</p>
</li>
<li><p><strong>Search</strong>: Skip it, or accept minimal JS for client-side search?</p>
</li>
</ol>

      </div>
      </div>
      
      <div class="message">
      <div class="message-role">
        <strong>user</strong>
      </div>
      <div class="message-content">
      
      1. I use both, broken links should render as plain text but emit a warning maybe
2. no I don't
3. I use yaml frontmatter; btw will need to set up a tag page also (that is linkable from within each writing / note page). also bonus points for if you can 
4. I do, would be great to include that (with css)
5. they will be in `assets/` - btw can image also add captioning potentially
6. yeah one is longer essays and one is more just small / short notes
7. chronological by date, the creation date is also in the frontmatter yaml
8. no, can ignore nested folders for now
9. maybe python? I use python mostly and actually understands it
10. github pages for now
11. publications with bibtex + project cards could be good / interesting
12. optional but let's just make it simple for now

in terms of blog style, I want something minimalist like bear blog, but also with the potential support for longer form articles with cool stuff such as distill.pub 
will obviously need stuff like code display but that might be feature bloat (or not)
      </div>
      </div>
      
      <div class="message">
      <div class="message-role">
        <strong>anthropic-claude-4.5-opus</strong>
      </div>
      <div class="message-content">
      
      <h1>Follow-up Questions</h1>
<p>Good context â€” Bear Blog minimalism + Distill.pub richness is an interesting design tension. A few more questions:</p>
<h2>Distill.pub Features</h2>
<ol start="13">
<li><p><strong>Which Distill features specifically?</strong> Some are CSS-only (typography, wide figures), others need JS (hover citations, interactive diagrams). Are you thinking:</p>
<ul>
<li>Margin notes / side notes?</li>
<li>Hover-preview citations?</li>
<li>Wide/full-bleed figures?</li>
<li>Floating table of contents?</li>
</ul>
</li>
<li><p><strong>Code blocks</strong>: Syntax highlighting without JS is doable via Pygments (pre-rendered HTML + CSS). Acceptable? Primary languages?</p>
</li>
</ol>
<h2>Content Details</h2>
<ol start="15">
<li><p><strong>Math delimiters</strong>: Obsidian uses <code>$...$</code> and <code>$$...$$</code> â€” same for you?</p>
</li>
<li><p><strong>BibTeX workflow</strong>: Single <code>.bib</code> file? Should publications auto-render to a list, and also support in-text citations like <code>[@cite-key]</code> in your writing?</p>
</li>
<li><p><strong>Tag pages</strong>: One page <em>per tag</em> (e.g., <code>/tags/ml/</code>) listing all matching posts? Plus an index page showing all tags?</p>
</li>
<li><p><strong>Backlinks</strong>: Classic Obsidian feature â€” show &quot;pages that link here&quot; at bottom of each note?</p>
</li>
</ol>
<h2>Style</h2>
<ol start="19">
<li><p><strong>Dark mode</strong>: CSS-only (follows system preference) or toggle button (needs JS)?</p>
</li>
<li><p><strong>URL style</strong>: <code>/writing/post-title/</code> (clean) or <code>/writing/post-title.html</code>?</p>
</li>
<li><p><strong>RSS feed</strong>: Want one?</p>
</li>
</ol>

      </div>
      </div>
      
      <div class="message">
      <div class="message-role">
        <strong>user</strong>
      </div>
      <div class="message-content">
      
      OK Let's relax some requirements. Javascript is allowed but let's still try to be as minimalistic as possible
13. Wide figures mostly, and maybe table of contents (by markdown) 
14. Codeblocks pls, mostly python? 
15. Same for me yes
16. Single bibtex with in-text citations also 
17. yeah one page per tag and index page with all tags
18. can omit backlink features for now 
19. toggle button 
20. clean url style (no .html)
21. Yes to RSS but as feature roadmap not MVP
      </div>
      </div>
      
      <div class="message">
      <div class="message-role">
        <strong>anthropic-claude-4.5-opus</strong>
      </div>
      <div class="message-content">
      
      <h1>Final Clarifying Questions</h1>
<p>Almost ready to spec this out. A few last details:</p>
<h2>Syntax Decisions</h2>
<ol start="22">
<li><p><strong>Figure captions + wide figures</strong>: Need a syntax. Options:</p>
<ul>
<li>(a) Use alt text as caption: <code>![This is the caption](image.png)</code></li>
<li>(b) Custom directive in markdown (e.g., <code>:::figure{.wide}</code>)</li>
<li>(c) HTML passthrough when you need special treatment</li>
</ul>
<p>Preference?</p>
</li>
<li><p><strong>Project cards format</strong>: YAML file with title/description/image/links? Or markdown files with frontmatter?</p>
</li>
</ol>
<h2>Workflow</h2>
<ol start="24">
<li><p><strong>Drafts</strong>: Support <code>draft: true</code> in frontmatter to exclude from build?</p>
</li>
<li><p><strong>Slug/permalink</strong>: Derive from filename, frontmatter <code>slug</code> field, or title?</p>
</li>
<li><p><strong>Dev server</strong>: Want live-reload on file changes, or just a simple <code>python -m http.server</code> situation?</p>
</li>
</ol>
<h2>Dependencies</h2>
<ol start="27">
<li><p><strong>Template engine</strong>: Jinja2 is the Python standard â€” acceptable?</p>
</li>
<li><p><strong>Markdown parser</strong>: I&#39;d lean toward <code>markdown-it-py</code> (CommonMark + plugins) or <code>mistune</code> over <code>python-markdown</code>. Preference?</p>
</li>
</ol>
<hr>
<p>After these, I&#39;ll give you:</p>
<ul>
<li>Directory structure</li>
<li>Config schema</li>
<li>Build pipeline architecture</li>
<li>Dependency list</li>
<li>Feature prioritization (MVP vs later)</li>
</ul>

      </div>
      </div>
      
      <div class="message">
      <div class="message-role">
        <strong>user</strong>
      </div>
      <div class="message-content">
      
      22. Use A
23. markdown files with frontmatter
24. yes 
25. derive from title field within frontmatter; frontmatter will also have sub-title also (note that in your posts
26. live reload if possible but if too much effort is whatever
27. yeah jinja2 good
28. no preference
      </div>
      </div>
      
      <div class="message">
      <div class="message-role">
        <strong>anthropic-claude-4.5-opus</strong>
      </div>
      <div class="message-content">
      
      <h1>Specification Document</h1>
<h2>Directory Structure</h2>
<pre><code>your-site/
â”œâ”€â”€ config.yaml
â”œâ”€â”€ build.py
â”œâ”€â”€ content/
â”‚   â”œâ”€â”€ about.md                 # Static page
â”‚   â”œâ”€â”€ research.md              # Static page (prose intro)
â”‚   â”œâ”€â”€ publications.bib         # BibTeX file
â”‚   â”œâ”€â”€ projects/                # Project cards (markdown + frontmatter)
â”‚   â”‚   â”œâ”€â”€ project-one.md
â”‚   â”‚   â””â”€â”€ project-two.md
â”‚   â”œâ”€â”€ writing/                 # Long-form essays
â”‚   â”‚   â”œâ”€â”€ essay-one.md
â”‚   â”‚   â””â”€â”€ essay-two.md
â”‚   â””â”€â”€ notes/                   # Short notes
â”‚       â”œâ”€â”€ note-one.md
â”‚       â””â”€â”€ note-two.md
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ images/
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ base.html
â”‚   â”œâ”€â”€ about.html
â”‚   â”œâ”€â”€ research.html
â”‚   â”œâ”€â”€ writing_index.html
â”‚   â”œâ”€â”€ writing_post.html
â”‚   â”œâ”€â”€ notes_index.html
â”‚   â”œâ”€â”€ notes_post.html
â”‚   â”œâ”€â”€ tag_index.html
â”‚   â”œâ”€â”€ tag_page.html
â”‚   â””â”€â”€ partials/
â”‚       â”œâ”€â”€ nav.html
â”‚       â”œâ”€â”€ head.html
â”‚       â”œâ”€â”€ toc.html
â”‚       â””â”€â”€ footer.html
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css
â”‚   â””â”€â”€ js/
â”‚       â””â”€â”€ theme-toggle.js      # Minimal: ~10 lines
â””â”€â”€ output/                      # Generated site
</code></pre>
<hr>
<h2>Config Schema (<code>config.yaml</code>)</h2>
<pre><code class="language-yaml">site:
  title: &quot;Your Name&quot;
  description: &quot;Researcher in X&quot;
  base_url: &quot;https://username.github.io&quot;
  author: &quot;Your Name&quot;

nav:
  - label: &quot;About&quot;
    url: &quot;/&quot;
  - label: &quot;Research&quot;
    url: &quot;/research/&quot;
  - label: &quot;Writing&quot;
    url: &quot;/writing/&quot;
  - label: &quot;Notes&quot;
    url: &quot;/notes/&quot;

style:
  font_body: &quot;IBM Plex Sans&quot;
  font_mono: &quot;IBM Plex Mono&quot;
  font_heading: &quot;IBM Plex Sans&quot;
  
  color_bg: &quot;#ffffff&quot;
  color_bg_dark: &quot;#1a1a1a&quot;
  color_text: &quot;#1a1a1a&quot;
  color_text_dark: &quot;#e0e0e0&quot;
  color_accent: &quot;#0066cc&quot;
  color_accent_dark: &quot;#66b3ff&quot;

math: true  # Load MathJax
</code></pre>
<hr>
<h2>Frontmatter Schema</h2>
<p><strong>Writing/Notes:</strong></p>
<pre><code class="language-yaml">---
title: &quot;My Post Title&quot;
subtitle: &quot;Optional subtitle&quot;
date: 2024-01-15
tags: [machine-learning, causality]
draft: false
toc: true  # Optional, renders table of contents
---
</code></pre>
<p><strong>Projects:</strong></p>
<pre><code class="language-yaml">---
title: &quot;Project Name&quot;
description: &quot;One-liner description&quot;
image: &quot;project-thumb.png&quot;  # Optional
links:
  - label: &quot;Paper&quot;
    url: &quot;https://arxiv.org/...&quot;
  - label: &quot;Code&quot;
    url: &quot;https://github.com/...&quot;
order: 1  # Manual ordering for projects
---

Longer markdown description here if needed.
</code></pre>
<hr>
<h2>Build Pipeline</h2>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. LOAD                                                    â”‚
â”‚     - Parse config.yaml                                     â”‚
â”‚     - Parse all .md files (frontmatter + body)             â”‚
â”‚     - Parse publications.bib                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. INDEX                                                   â”‚
â”‚     - Build page registry: {slug: page_object}             â”‚
â”‚     - Build tag registry: {tag: [pages]}                   â”‚
â”‚     - Filter drafts (unless --drafts flag)                 â”‚
â”‚     - Sort by date                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. TRANSFORM MARKDOWN                                      â”‚
â”‚     - Wiki links â†’ resolve against page registry           â”‚
â”‚       [[page]] â†’ &lt;a href=&quot;/notes/page/&quot;&gt;page&lt;/a&gt;           â”‚
â”‚       [[page|alias]] â†’ &lt;a href=&quot;...&quot;&gt;alias&lt;/a&gt;             â”‚
â”‚       broken â†’ &lt;span class=&quot;broken-link&quot;&gt;page&lt;/span&gt; + warnâ”‚
â”‚     - Callouts â†’ &lt;aside class=&quot;callout callout-note&quot;&gt;      â”‚
â”‚     - Images â†’ &lt;figure&gt;&lt;img&gt;&lt;figcaption&gt;                   â”‚
â”‚     - Code â†’ Pygments HTML                                  â”‚
â”‚     - Math â†’ leave $...$ for MathJax                       â”‚
â”‚     - Citations â†’ resolve against .bib                     â”‚
â”‚     - Extract TOC from headers                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. RENDER                                                  â”‚
â”‚     - Jinja2 templates                                      â”‚
â”‚     - Generate: /index.html (about)                        â”‚
â”‚               /research/index.html                         â”‚
â”‚               /writing/index.html                          â”‚
â”‚               /writing/{slug}/index.html                   â”‚
â”‚               /notes/index.html                            â”‚
â”‚               /notes/{slug}/index.html                     â”‚
â”‚               /tags/index.html                             â”‚
â”‚               /tags/{tag}/index.html                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. COPY STATIC                                             â”‚
â”‚     - assets/ â†’ output/assets/                             â”‚
â”‚     - static/ â†’ output/static/                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr>
<h2>Dependencies</h2>
<pre><code># requirements.txt
pyyaml&gt;=6.0
jinja2&gt;=3.1
markdown-it-py&gt;=3.0
mdit-py-plugins&gt;=0.4      # TOC, footnotes, etc.
pygments&gt;=2.17            # Syntax highlighting
bibtexparser&gt;=1.4         # BibTeX parsing
python-slugify&gt;=8.0       # Title â†’ slug
watchdog&gt;=4.0             # Live reload (optional)
</code></pre>
<hr>
<h2>MVP vs Roadmap</h2>
<table>
<thead>
<tr>
<th>Feature</th>
<th>MVP</th>
<th>v1.1</th>
<th>v1.2</th>
</tr>
</thead>
<tbody><tr>
<td>Basic markdown â†’ HTML</td>
<td>âœ“</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Wiki links</td>
<td>âœ“</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Tags + tag pages</td>
<td>âœ“</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Callouts</td>
<td>âœ“</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Code highlighting</td>
<td>âœ“</td>
<td></td>
<td></td>
</tr>
<tr>
<td>MathJax</td>
<td>âœ“</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Figure captions</td>
<td>âœ“</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Dark mode toggle</td>
<td>âœ“</td>
<td></td>
<td></td>
</tr>
<tr>
<td>BibTeX publications list</td>
<td>âœ“</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Project cards</td>
<td>âœ“</td>
<td></td>
<td></td>
</tr>
<tr>
<td>TOC</td>
<td>âœ“</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Wide figures</td>
<td>âœ“</td>
<td></td>
<td></td>
</tr>
<tr>
<td>In-text citations <code>[@key]</code></td>
<td></td>
<td>âœ“</td>
<td></td>
</tr>
<tr>
<td>Live reload dev server</td>
<td></td>
<td>âœ“</td>
<td></td>
</tr>
<tr>
<td>RSS feed</td>
<td></td>
<td>âœ“</td>
<td></td>
</tr>
<tr>
<td>Client-side search</td>
<td></td>
<td></td>
<td>âœ“</td>
</tr>
</tbody></table>
<hr>
<h2>Questions Before I Write Code</h2>
<ol>
<li><p><strong>Wide figures syntax</strong>: Should any image be wide, or do you want explicit syntax like <code>![caption](image.png){.wide}</code>? (I can parse this.)</p>
</li>
<li><p><strong>Citation rendering</strong>: APA-style? Or just &quot;Author (Year)&quot; with hover for full citation?</p>
</li>
<li><p><strong>Publication grouping</strong>: By year? By type (conference/journal)? Flat list?</p>
</li>
<li><p><strong>About page as homepage</strong>: Confirm <code>/</code> is the About page, not a separate landing page?</p>
</li>
<li><p><strong>Anything else from Distill.pub</strong> you want that I haven&#39;t captured? (Margin notes are CSS-doable if you want them later.)</p>
</li>
</ol>

      </div>
      </div>
      
      <div class="message">
      <div class="message-role">
        <strong>user</strong>
      </div>
      <div class="message-content">
      
      1. maybe just make all images wide but limit to min(viewport width, 1.5x min(height, width)) of image if u get what i Mean
2. citation just in-text [1]... with hover for full citation
3. publication by year
4. yeah / is about page 
5. will think of more later

instead of writing code, write a full, super detailed spec in AGENTS.md, wrapped in ``` ```, for claude-code to generate the code instead
if you use "```" within .md, use """ instead (my rendering engine is funny)
just generate the specification, don't write any code within your spec
      </div>
      </div>
      
      <div class="message">
      <div class="message-role">
        <strong>anthropic-claude-4.5-opus</strong>
      </div>
      <div class="message-content">
      
      <pre><code class="language-markdown"># AGENTS.md â€” Static Site Generator Specification

## Overview

Build a Python-based static site generator that converts Obsidian-flavored markdown files into a minimalist, Distill.pub-inspired academic website. The generator should be a single-command build tool with clean, maintainable code.

**Design Philosophy:**
- Bear Blog minimalism (fast, no bloat, readable)
- Distill.pub richness (typography, wide figures, hover citations)
- Obsidian compatibility (wiki links, callouts, YAML frontmatter)
- Minimal JavaScript (only dark mode toggle + MathJax)

---

## Project Structure

Generate the following directory structure:

&quot;&quot;&quot;
ssg/
â”œâ”€â”€ build.py                    # Main entry point, CLI
â”œâ”€â”€ config.yaml                 # Site configuration
â”œâ”€â”€ requirements.txt            # Python dependencies
â”œâ”€â”€ README.md                   # Usage documentation
â”‚
â”œâ”€â”€ ssg/                        # Python package
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py               # Config loading and validation
â”‚   â”œâ”€â”€ content.py              # Content loading and parsing
â”‚   â”œâ”€â”€ markdown_ext.py         # Custom markdown transformations
â”‚   â”œâ”€â”€ citations.py            # BibTeX parsing and citation rendering
â”‚   â”œâ”€â”€ templates.py            # Jinja2 template management
â”‚   â”œâ”€â”€ builder.py              # Main build orchestration
â”‚   â””â”€â”€ utils.py                # Slugify, file ops, logging
â”‚
â”œâ”€â”€ content/                    # User content (example/scaffold)
â”‚   â”œâ”€â”€ about.md
â”‚   â”œâ”€â”€ research.md
â”‚   â”œâ”€â”€ publications.bib
â”‚   â”œâ”€â”€ projects/
â”‚   â”‚   â””â”€â”€ .gitkeep
â”‚   â”œâ”€â”€ writing/
â”‚   â”‚   â””â”€â”€ .gitkeep
â”‚   â””â”€â”€ notes/
â”‚       â””â”€â”€ .gitkeep
â”‚
â”œâ”€â”€ assets/                     # User assets
â”‚   â””â”€â”€ images/
â”‚       â””â”€â”€ .gitkeep
â”‚
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ base.html
â”‚   â”œâ”€â”€ page.html               # Generic static page (about, research)
â”‚   â”œâ”€â”€ research.html           # Research page with publications + projects
â”‚   â”œâ”€â”€ post_index.html         # List view for writing/notes
â”‚   â”œâ”€â”€ post.html               # Individual post view
â”‚   â”œâ”€â”€ tag_index.html          # All tags listing
â”‚   â”œâ”€â”€ tag_page.html           # Single tag&#39;s posts
â”‚   â””â”€â”€ partials/
â”‚       â”œâ”€â”€ nav.html
â”‚       â”œâ”€â”€ head.html
â”‚       â”œâ”€â”€ footer.html
â”‚       â”œâ”€â”€ toc.html
â”‚       â”œâ”€â”€ post_card.html
â”‚       â”œâ”€â”€ project_card.html
â”‚       â”œâ”€â”€ publication.html
â”‚       â””â”€â”€ citation_tooltip.html
â”‚
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css
â”‚   â””â”€â”€ js/
â”‚       â””â”€â”€ theme.js
â”‚
â””â”€â”€ output/                     # Generated site (gitignored)
    â””â”€â”€ .gitkeep
&quot;&quot;&quot;

---

## Configuration

### config.yaml Schema

&quot;&quot;&quot;yaml
site:
  title: &quot;Site Title&quot;
  description: &quot;Site description for meta tags&quot;
  base_url: &quot;https://username.github.io&quot;  # No trailing slash
  author: &quot;Author Name&quot;

nav:
  - label: &quot;About&quot;
    url: &quot;/&quot;
  - label: &quot;Research&quot;
    url: &quot;/research/&quot;
  - label: &quot;Writing&quot;
    url: &quot;/writing/&quot;
  - label: &quot;Notes&quot;
    url: &quot;/notes/&quot;

style:
  # Fonts (loaded from Google Fonts)
  font_body: &quot;IBM Plex Sans&quot;
  font_mono: &quot;IBM Plex Mono&quot;
  font_heading: &quot;IBM Plex Sans&quot;
  
  # Light mode colors
  color_bg: &quot;#ffffff&quot;
  color_text: &quot;#1a1a1a&quot;
  color_text_muted: &quot;#666666&quot;
  color_accent: &quot;#0066cc&quot;
  color_border: &quot;#e0e0e0&quot;
  color_code_bg: &quot;#f5f5f5&quot;
  
  # Dark mode colors
  color_bg_dark: &quot;#1a1a1a&quot;
  color_text_dark: &quot;#e0e0e0&quot;
  color_text_muted_dark: &quot;#999999&quot;
  color_accent_dark: &quot;#66b3ff&quot;
  color_border_dark: &quot;#333333&quot;
  color_code_bg_dark: &quot;#2d2d2d&quot;

math: true  # Whether to load MathJax
&quot;&quot;&quot;

### config.py Implementation

- Load YAML file with PyYAML
- Validate all required fields exist
- Provide sensible defaults for optional fields
- Expose as a dataclass or typed dict for IDE support
- Raise clear errors for missing/malformed config

---

## Content Types

### 1. Static Pages (about.md, research.md)

**Location:** `content/about.md`, `content/research.md`

**Frontmatter:**
&quot;&quot;&quot;yaml
---
title: &quot;About&quot;
---
&quot;&quot;&quot;

**Behavior:**
- `about.md` renders to `/index.html` (homepage)
- `research.md` renders to `/research/index.html`
- Research page additionally includes publications and project cards

### 2. Writing Posts

**Location:** `content/writing/*.md`

**Frontmatter (required fields marked with *):**
&quot;&quot;&quot;yaml
---
title: &quot;Post Title&quot;*
subtitle: &quot;Optional subtitle&quot;
date: 2024-01-15*          # YYYY-MM-DD format
tags: [tag-one, tag-two]   # List of strings, optional
draft: false               # Default: false
toc: true                  # Default: false
---
&quot;&quot;&quot;

**Behavior:**
- Renders to `/writing/{slug}/index.html`
- Slug derived from title: &quot;My Post Title&quot; â†’ &quot;my-post-title&quot;
- Slugify rules: lowercase, replace spaces with hyphens, remove special characters, collapse multiple hyphens
- Listed on `/writing/index.html` sorted by date descending
- Posts with `draft: true` excluded from build unless `--drafts` flag passed

### 3. Notes

**Location:** `content/notes/*.md`

**Frontmatter:** Same schema as Writing

**Behavior:**
- Renders to `/notes/{slug}/index.html`
- Listed on `/notes/index.html` sorted by date descending
- Identical processing to Writing, just different section

### 4. Projects

**Location:** `content/projects/*.md`

**Frontmatter:**
&quot;&quot;&quot;yaml
---
title: &quot;Project Name&quot;*
description: &quot;One-line description&quot;*
image: &quot;project-image.png&quot;         # Relative to assets/images/
links:
  - label: &quot;Paper&quot;
    url: &quot;https://arxiv.org/...&quot;
  - label: &quot;Code&quot;
    url: &quot;https://github.com/...&quot;
order: 1                           # Manual sort order (ascending)
---

Optional longer markdown body for project description.
&quot;&quot;&quot;

**Behavior:**
- Rendered as cards on the Research page
- Sorted by `order` field ascending
- No individual project pages (cards only)

### 5. Publications (BibTeX)

**Location:** `content/publications.bib`

**Supported BibTeX fields:**
- `author` (required)
- `title` (required)
- `year` (required)
- `booktitle` OR `journal` (venue)
- `url` (link to paper)
- `code` (custom field: link to code repository)
- `abstract` (for hover/tooltip if desired)

**Behavior:**
- Parsed into structured data
- Rendered on Research page grouped by year (descending)
- Each entry shows: Author list, &quot;Title,&quot; Venue, Year, [Paper] [Code] links
- Citation keys (e.g., `smith2024`) used for in-text citations

---

## Markdown Processing

Use `markdown-it-py` as the base parser. Implement custom processing in this order:

### Processing Pipeline

1. **Extract frontmatter** â€” Parse YAML between `---` delimiters
2. **Wiki links** â€” Transform before markdown parsing
3. **Citations** â€” Transform `[@key]` syntax
4. **Parse markdown** â€” markdown-it-py with plugins
5. **Post-process HTML** â€” Callouts, figure captions, wide images

### Wiki Links

**Syntax:**
- `[[page-title]]` â€” Link using page title as display text
- `[[page-title|display text]]` â€” Link with custom display text

**Resolution:**
1. Build registry of all pages: `{slugified-title: {url, title, section}}`
2. When encountering `[[text]]`:
   - Slugify `text`
   - Look up in registry
   - If found: render as `&lt;a href=&quot;{url}&quot;&gt;{display}&lt;/a&gt;`
   - If not found: render as `&lt;span class=&quot;broken-link&quot;&gt;{text}&lt;/span&gt;` and emit warning to console

**Implementation:**
- Use regex to find wiki links before markdown parsing
- Pattern: `\[\[([^\]|]+)(?:\|([^\]]+))?\]\]`
- Replace with either resolved link or broken-link span

### In-Text Citations

**Syntax:** `[@citation-key]` or `[@key1; @key2]` for multiple

**Rendering:**
- Single: `&lt;cite class=&quot;citation&quot; data-keys=&quot;key1&quot;&gt;[1]&lt;/cite&gt;`
- Multiple: `&lt;cite class=&quot;citation&quot; data-keys=&quot;key1,key2&quot;&gt;[1, 2]&lt;/cite&gt;`
- Number assigned based on order of first appearance in document
- At end of document, render bibliography section with full citations
- Tooltip on hover shows full citation (CSS-only using `::after` and `attr()`, or minimal JS)

**Bibliography format:**
&quot;&quot;&quot;html
&lt;section class=&quot;bibliography&quot;&gt;
  &lt;h2&gt;References&lt;/h2&gt;
  &lt;ol class=&quot;references&quot;&gt;
    &lt;li id=&quot;ref-1&quot;&gt;Author. &quot;Title.&quot; &lt;em&gt;Venue&lt;/em&gt;, Year.&lt;/li&gt;
  &lt;/ol&gt;
&lt;/section&gt;
&quot;&quot;&quot;

### Callouts/Admonitions

**Obsidian Syntax:**
&quot;&quot;&quot;markdown
&gt; [!note] Optional Title
&gt; Callout content here
&gt; Can be multiple lines
&quot;&quot;&quot;

**Supported types:** note, warning, tip, important, caution, info

**Output HTML:**
&quot;&quot;&quot;html
&lt;aside class=&quot;callout callout-note&quot;&gt;
  &lt;div class=&quot;callout-title&quot;&gt;
    &lt;span class=&quot;callout-icon&quot;&gt;&lt;/span&gt;
    &lt;span class=&quot;callout-title-text&quot;&gt;Optional Title&lt;/span&gt;
  &lt;/div&gt;
  &lt;div class=&quot;callout-content&quot;&gt;
    &lt;p&gt;Callout content here&lt;/p&gt;
    &lt;p&gt;Can be multiple lines&lt;/p&gt;
  &lt;/div&gt;
&lt;/aside&gt;
&quot;&quot;&quot;

**Implementation:**
- Post-process the HTML output
- Detect blockquotes starting with `[!type]`
- Parse title (if present) and type
- Replace blockquote with aside structure

### Images and Figures

**Input syntax:** `![Caption text](path/to/image.png)`

**Output HTML:**
&quot;&quot;&quot;html
&lt;figure class=&quot;image-figure&quot;&gt;
  &lt;img src=&quot;/assets/images/image.png&quot; alt=&quot;Caption text&quot; loading=&quot;lazy&quot;&gt;
  &lt;figcaption&gt;Caption text&lt;/figcaption&gt;
&lt;/figure&gt;
&quot;&quot;&quot;

**Width constraint CSS:**
- All figures are &quot;wide&quot; by default (break out of text column)
- Max width: `min(100vw - 2rem, 1.5 * min(natural-height, natural-width))`
- Since we can&#39;t know natural dimensions at build time, use CSS:
  - Set max-width to ~120% of text column (e.g., if text is 680px, figure max is 816px)
  - Use `max-width: min(calc(100vw - 2rem), 900px)` as practical approximation
  - Center with negative margins

**Path resolution:**
- If path starts with `/`, use as-is
- Otherwise, prepend `/assets/images/`

### Code Blocks

**Input:**
&quot;&quot;&quot;markdown
```python
def hello():
    print(&quot;world&quot;)
</code></pre>
<p>&quot;&quot;&quot;</p>
<p><strong>Processing:</strong></p>
<ul>
<li>Use Pygments for syntax highlighting</li>
<li>Generate HTML with inline classes (not inline styles) for theming</li>
<li>Use Pygments&#39; <code>HtmlFormatter</code> with <code>cssclass=&quot;highlight&quot;</code></li>
</ul>
<p><strong>Output:</strong>
&quot;&quot;&quot;html</p>
<div class="code-block">
  <div class="code-header">
    <span class="code-language">python</span>
  </div>
  <pre class="highlight"><code>...</code></pre>
</div>
"""

<p><strong>CSS:</strong></p>
<ul>
<li>Generate Pygments CSS for both light and dark themes</li>
<li>Include in style.css or as separate file</li>
</ul>
<h3>Math (LaTeX)</h3>
<p><strong>Delimiters:</strong></p>
<ul>
<li>Inline: <code>$...$</code></li>
<li>Display: <code>$$...$$</code></li>
</ul>
<p><strong>Processing:</strong></p>
<ul>
<li>Do NOT process math content â€” leave delimiters intact for MathJax</li>
<li>Ensure markdown parser doesn&#39;t mangle content inside delimiters</li>
<li>Configure markdown-it-py to treat <code>$</code> appropriately (may need escaping logic)</li>
</ul>
<p><strong>MathJax Configuration:</strong>
&quot;&quot;&quot;html</p>
<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$']],
      displayMath: [['$$', '$$']]
    }
  };
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script>
<p>&quot;&quot;&quot;</p>
<h3>Table of Contents</h3>
<p><strong>Trigger:</strong> <code>toc: true</code> in frontmatter</p>
<p><strong>Generation:</strong></p>
<ul>
<li>Extract all headings (h2, h3, h4) from parsed HTML</li>
<li>Generate nested list structure</li>
<li>Add <code>id</code> attributes to headings if not present (slugified heading text)</li>
</ul>
<p><strong>Output:</strong>
&quot;&quot;&quot;html</p>
<nav class="toc">
  <h2 class="toc-title">Contents</h2>
  <ol class="toc-list">
    <li><a href="#heading-one">Heading One</a>
      <ol>
        <li><a href="#subheading">Subheading</a></li>
      </ol>
    </li>
  </ol>
</nav>
"""

<p><strong>Placement:</strong> Rendered at top of article content, after title/subtitle/meta</p>
<hr>
<h2>Templates</h2>
<p>Use Jinja2. All templates extend <code>base.html</code>.</p>
<h3>base.html</h3>
<p>&quot;&quot;&quot;html
<!DOCTYPE html></p>
<html lang="en" data-theme="light">
<head>
  {% include "partials/head.html" %}
</head>
<body>
  {% include "partials/nav.html" %}
  
  <main class="main">
    {% block content %}{% endblock %}
  </main>
  
<p>  {% include &quot;partials/footer.html&quot; %}</p>
<p>  {% if config.math %}
  <!-- MathJax config here -->
  {% endif %}</p>
  <script src="/static/js/theme.js"></script>
</body>
</html>
"""

<h3>partials/head.html</h3>
<p>Include:</p>
<ul>
<li>Meta charset, viewport</li>
<li>Title: <code>{{ page.title }} | {{ config.site.title }}</code></li>
<li>Meta description</li>
<li>Open Graph tags (og:title, og:description, og:type)</li>
<li>Google Fonts link for configured fonts</li>
<li>CSS link</li>
<li>Favicon link (if exists)</li>
<li>Canonical URL</li>
</ul>
<h3>partials/nav.html</h3>
<p>&quot;&quot;&quot;html</p>
<header class="header">
  <nav class="nav">
    <a href="/" class="nav-logo">{{ config.site.title }}</a>
    <ul class="nav-links">
      {% for item in config.nav %}
      <li><a href="{{ item.url }}" {% if current_url == item.url %}class="active"{% endif %}>{{ item.label }}</a></li>
      {% endfor %}
    </ul>
    <button class="theme-toggle" aria-label="Toggle dark mode">
      <span class="theme-icon"></span>
    </button>
  </nav>
</header>
"""

<h3>partials/footer.html</h3>
<p>Simple footer with copyright year and author name.</p>
<h3>page.html (About)</h3>
<p>&quot;&quot;&quot;html
{% extends &quot;base.html&quot; %}
{% block content %}</p>
<article class="page">
  <header class="page-header">
    <h1>{{ page.title }}</h1>
  </header>
  <div class="page-content prose">
    {{ page.content | safe }}
  </div>
</article>
{% endblock %}
"""

<h3>research.html</h3>
<p>&quot;&quot;&quot;html
{% extends &quot;base.html&quot; %}
{% block content %}</p>
<article class="page research">
  <header class="page-header">
    <h1>{{ page.title }}</h1>
  </header>
  
  <div class="page-content prose">
    {{ page.content | safe }}
  </div>
  
<p>  {% if projects %}
  <section class="projects-section">
    <h2>Projects</h2>
    <div class="projects-grid">
      {% for project in projects %}
      {% include &quot;partials/project_card.html&quot; %}
      {% endfor %}
    </div>
  </section>
  {% endif %}</p>
<p>  {% if publications %}
  <section class="publications-section">
    <h2>Publications</h2>
    {% for year, pubs in publications | groupby(&#39;year&#39;) | sort(reverse=true) %}
    <div class="pub-year-group">
      <h3 class="pub-year">{{ year }}</h3>
      <ul class="pub-list">
        {% for pub in pubs %}
        {% include &quot;partials/publication.html&quot; %}
        {% endfor %}
      </ul>
    </div>
    {% endfor %}
  </section>
  {% endif %}</p>
</article>
{% endblock %}
"""

<h3>post_index.html (Writing/Notes listing)</h3>
<p>&quot;&quot;&quot;html
{% extends &quot;base.html&quot; %}
{% block content %}</p>
<div class="post-index">
  <header class="section-header">
    <h1>{{ section_title }}</h1>
  </header>
  
  <ul class="post-list">
    {% for post in posts %}
    <li class="post-item">
      <article>
        <a href="{{ post.url }}" class="post-link">
          <h2 class="post-title">{{ post.title }}</h2>
          {% if post.subtitle %}
          <p class="post-subtitle">{{ post.subtitle }}</p>
          {% endif %}
        </a>
        <div class="post-meta">
          <time datetime="{{ post.date.isoformat() }}">{{ post.date.strftime('%B %d, %Y') }}</time>
          {% if post.tags %}
          <span class="post-tags">
            {% for tag in post.tags %}
            <a href="/tags/{{ tag | slugify }}/" class="tag">{{ tag }}</a>
            {% endfor %}
          </span>
          {% endif %}
        </div>
      </article>
    </li>
    {% endfor %}
  </ul>
</div>
{% endblock %}
"""

<h3>post.html (Individual writing/note)</h3>
<p>&quot;&quot;&quot;html
{% extends &quot;base.html&quot; %}
{% block content %}</p>
<article class="post">
  <header class="post-header">
    <h1 class="post-title">{{ post.title }}</h1>
    {% if post.subtitle %}
    <p class="post-subtitle">{{ post.subtitle }}</p>
    {% endif %}
    <div class="post-meta">
      <time datetime="{{ post.date.isoformat() }}">{{ post.date.strftime('%B %d, %Y') }}</time>
      {% if post.tags %}
      <span class="post-tags">
        {% for tag in post.tags %}
        <a href="/tags/{{ tag | slugify }}/" class="tag">{{ tag }}</a>
        {% endfor %}
      </span>
      {% endif %}
    </div>
  </header>
  
<p>  {% if post.toc and toc_html %}
  {{ toc_html | safe }}
  {% endif %}</p>
  <div class="post-content prose">
    {{ post.content | safe }}
  </div>
  
<p>  {% if post.bibliography %}
  {{ post.bibliography | safe }}
  {% endif %}</p>
</article>
{% endblock %}
"""

<h3>tag_index.html</h3>
<p>&quot;&quot;&quot;html
{% extends &quot;base.html&quot; %}
{% block content %}</p>
<div class="tag-index">
  <header class="section-header">
    <h1>Tags</h1>
  </header>
  
  <ul class="tag-cloud">
    {% for tag, posts in tags.items() | sort %}
    <li>
      <a href="/tags/{{ tag | slugify }}/" class="tag">
        {{ tag }} <span class="tag-count">({{ posts | length }})</span>
      </a>
    </li>
    {% endfor %}
  </ul>
</div>
{% endblock %}
"""

<h3>tag_page.html</h3>
<p>&quot;&quot;&quot;html
{% extends &quot;base.html&quot; %}
{% block content %}</p>
<div class="tag-page">
  <header class="section-header">
    <h1>Tagged: {{ tag }}</h1>
    <p class="tag-count">{{ posts | length }} post{% if posts | length != 1 %}s{% endif %}</p>
  </header>
  
  <ul class="post-list">
    {% for post in posts %}
    <!-- Same structure as post_index.html post items -->
    {% endfor %}
  </ul>
</div>
{% endblock %}
"""

<h3>partials/project_card.html</h3>
<p>&quot;&quot;&quot;html</p>
<article class="project-card">
  {% if project.image %}
  <div class="project-image">
    <img src="/assets/images/{{ project.image }}" alt="{{ project.title }}" loading="lazy">
  </div>
  {% endif %}
  <div class="project-info">
    <h3 class="project-title">{{ project.title }}</h3>
    <p class="project-description">{{ project.description }}</p>
    {% if project.links %}
    <div class="project-links">
      {% for link in project.links %}
      <a href="{{ link.url }}" class="project-link">{{ link.label }}</a>
      {% endfor %}
    </div>
    {% endif %}
  </div>
</article>
"""

<h3>partials/publication.html</h3>
<p>&quot;&quot;&quot;html</p>
<li class="publication">
  <span class="pub-authors">{{ pub.authors | join(', ') }}</span>.
  "<span class="pub-title">{{ pub.title }}</span>."
  <em class="pub-venue">{{ pub.venue }}</em>, {{ pub.year }}.
  {% if pub.url or pub.code %}
  <span class="pub-links">
    {% if pub.url %}<a href="{{ pub.url }}">[Paper]</a>{% endif %}
    {% if pub.code %}<a href="{{ pub.code }}">[Code]</a>{% endif %}
  </span>
  {% endif %}
</li>
"""

<hr>
<h2>CSS Specification</h2>
<h3>Design Tokens (CSS Custom Properties)</h3>
<p>&quot;&quot;&quot;css
:root {
  /* Typography */
  --font-body: &#39;IBM Plex Sans&#39;, -apple-system, sans-serif;
  --font-mono: &#39;IBM Plex Mono&#39;, monospace;
  --font-heading: &#39;IBM Plex Sans&#39;, sans-serif;</p>
<p>  /* Sizing */
  --content-width: 680px;
  --wide-width: 900px;
  --full-width: 100%;</p>
<p>  /* Spacing scale */
  --space-xs: 0.25rem;
  --space-sm: 0.5rem;
  --space-md: 1rem;
  --space-lg: 2rem;
  --space-xl: 4rem;</p>
<p>  /* Colors - Light (default) */
  --color-bg: #ffffff;
  --color-text: #1a1a1a;
  --color-text-muted: #666666;
  --color-accent: #0066cc;
  --color-border: #e0e0e0;
  --color-code-bg: #f5f5f5;
}</p>
<p>[data-theme=&quot;dark&quot;] {
  --color-bg: #1a1a1a;
  --color-text: #e0e0e0;
  --color-text-muted: #999999;
  --color-accent: #66b3ff;
  --color-border: #333333;
  --color-code-bg: #2d2d2d;
}
&quot;&quot;&quot;</p>
<h3>Layout</h3>
<ul>
<li>Body: centered, max-width content</li>
<li>Main content column: 680px max-width, centered with auto margins</li>
<li>Wide elements (figures): 900px max-width, centered, break out of text column using negative margins</li>
<li>Nav: full width, content constrained to same max-width as body</li>
<li>Responsive: single column, reduce margins on mobile</li>
</ul>
<h3>Typography</h3>
<p>&quot;&quot;&quot;css
.prose {
  font-size: 1.125rem;      /* 18px */
  line-height: 1.7;</p>
<p>  h1 { font-size: 2.25rem; margin-top: 3rem; margin-bottom: 1rem; }
  h2 { font-size: 1.75rem; margin-top: 2.5rem; margin-bottom: 0.75rem; }
  h3 { font-size: 1.375rem; margin-top: 2rem; margin-bottom: 0.5rem; }</p>
<p>  p { margin-bottom: 1.5rem; }</p>
<p>  a { color: var(--color-accent); text-decoration: underline; }
  a:hover { text-decoration: none; }</p>
<p>  code { 
    font-family: var(--font-mono);
    font-size: 0.9em;
    background: var(--color-code-bg);
    padding: 0.1em 0.3em;
    border-radius: 3px;
  }</p>
<p>  blockquote {
    border-left: 3px solid var(--color-border);
    padding-left: 1rem;
    margin-left: 0;
    color: var(--color-text-muted);
  }
}
&quot;&quot;&quot;</p>
<h3>Navigation</h3>
<ul>
<li>Horizontal layout: logo left, links center/right, theme toggle far right</li>
<li>Mobile: hamburger menu or simple stacked layout</li>
<li>Active link styling (underline or bold)</li>
<li>Sticky/fixed optional (can be static for simplicity)</li>
</ul>
<h3>Post List</h3>
<ul>
<li>Each post: title (linked), subtitle below (muted), date and tags on separate line</li>
<li>Clear visual separation between posts (spacing, not heavy borders)</li>
<li>Tags: small, pill-shaped, muted color, hover state</li>
</ul>
<h3>Figures</h3>
<p>&quot;&quot;&quot;css
.image-figure {
  margin: var(--space-lg) 0;</p>
<p>  /* Break out of text column */
  width: var(--wide-width);
  max-width: calc(100vw - 2rem);
  margin-left: calc((var(--content-width) - var(--wide-width)) / 2);</p>
<p>  img {
    width: 100%;
    height: auto;
    display: block;
  }</p>
<p>  figcaption {
    margin-top: var(--space-sm);
    font-size: 0.9rem;
    color: var(--color-text-muted);
    text-align: center;
  }
}</p>
<p>/* On narrow screens, just full width */
@media (max-width: 900px) {
  .image-figure {
    width: 100%;
    margin-left: 0;
  }
}
&quot;&quot;&quot;</p>
<h3>Callouts</h3>
<p>&quot;&quot;&quot;css
.callout {
  margin: var(--space-lg) 0;
  padding: var(--space-md);
  border-radius: 4px;
  border-left: 4px solid;
}</p>
<p>.callout-note { 
  background: rgba(0, 102, 204, 0.1); 
  border-color: #0066cc; 
}</p>
<p>.callout-warning { 
  background: rgba(255, 153, 0, 0.1); 
  border-color: #ff9900; 
}</p>
<p>.callout-tip { 
  background: rgba(0, 153, 51, 0.1); 
  border-color: #009933; 
}</p>
<p>/* Add more callout types... */</p>
<p>.callout-title {
  font-weight: 600;
  margin-bottom: var(--space-sm);
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}</p>
<p>.callout-content p:last-child {
  margin-bottom: 0;
}
&quot;&quot;&quot;</p>
<h3>Code Blocks</h3>
<p>&quot;&quot;&quot;css
.code-block {
  margin: var(--space-lg) 0;
  border-radius: 6px;
  overflow: hidden;
  background: var(--color-code-bg);
}</p>
<p>.code-header {
  padding: var(--space-sm) var(--space-md);
  background: rgba(0, 0, 0, 0.1);
  font-family: var(--font-mono);
  font-size: 0.8rem;
  color: var(--color-text-muted);
}</p>
<p>.code-block pre {
  margin: 0;
  padding: var(--space-md);
  overflow-x: auto;
}</p>
<p>.code-block code {
  background: none;
  padding: 0;
}</p>
<p>/* Include Pygments theme CSS here */
&quot;&quot;&quot;</p>
<h3>Citations</h3>
<p>&quot;&quot;&quot;css
.citation {
  color: var(--color-accent);
  cursor: help;
  position: relative;
}</p>
<p>.citation:hover::after {
  content: attr(data-citation);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: var(--color-text);
  color: var(--color-bg);
  padding: var(--space-sm) var(--space-md);
  border-radius: 4px;
  font-size: 0.85rem;
  white-space: nowrap;
  max-width: 400px;
  white-space: normal;
  z-index: 100;
}</p>
<p>.bibliography {
  margin-top: var(--space-xl);
  padding-top: var(--space-lg);
  border-top: 1px solid var(--color-border);
}</p>
<p>.references {
  font-size: 0.95rem;
  padding-left: 1.5rem;
}</p>
<p>.references li {
  margin-bottom: var(--space-sm);
}
&quot;&quot;&quot;</p>
<h3>Table of Contents</h3>
<p>&quot;&quot;&quot;css
.toc {
  background: var(--color-code-bg);
  padding: var(--space-md);
  border-radius: 6px;
  margin-bottom: var(--space-xl);
}</p>
<p>.toc-title {
  font-size: 1rem;
  margin-bottom: var(--space-sm);
}</p>
<p>.toc-list {
  margin: 0;
  padding-left: 1.25rem;
  font-size: 0.95rem;
}</p>
<p>.toc-list ol {
  margin-top: var(--space-xs);
  padding-left: 1rem;
}</p>
<p>.toc-list a {
  color: var(--color-text);
  text-decoration: none;
}</p>
<p>.toc-list a:hover {
  color: var(--color-accent);
}
&quot;&quot;&quot;</p>
<h3>Theme Toggle</h3>
<p>&quot;&quot;&quot;css
.theme-toggle {
  background: none;
  border: 1px solid var(--color-border);
  border-radius: 50%;
  width: 2.5rem;
  height: 2.5rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}</p>
<p>.theme-icon::before {
  content: &quot;â˜€ï¸&quot;;  /* Or use SVG icons */
}</p>
<p>[data-theme=&quot;dark&quot;] .theme-icon::before {
  content: &quot;ğŸŒ™&quot;;
}
&quot;&quot;&quot;</p>
<h3>Broken Links</h3>
<p>&quot;&quot;&quot;css
.broken-link {
  color: var(--color-text-muted);
  background: rgba(255, 0, 0, 0.1);
  padding: 0.1em 0.2em;
  border-radius: 2px;
}
&quot;&quot;&quot;</p>
<h3>Project Cards</h3>
<p>&quot;&quot;&quot;css
.projects-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: var(--space-lg);
  margin-top: var(--space-lg);
}</p>
<p>.project-card {
  border: 1px solid var(--color-border);
  border-radius: 8px;
  overflow: hidden;
}</p>
<p>.project-image img {
  width: 100%;
  height: 180px;
  object-fit: cover;
}</p>
<p>.project-info {
  padding: var(--space-md);
}</p>
<p>.project-title {
  margin: 0 0 var(--space-sm);
  font-size: 1.125rem;
}</p>
<p>.project-description {
  color: var(--color-text-muted);
  font-size: 0.95rem;
  margin-bottom: var(--space-md);
}</p>
<p>.project-links {
  display: flex;
  gap: var(--space-sm);
}</p>
<p>.project-link {
  font-size: 0.9rem;
}
&quot;&quot;&quot;</p>
<h3>Publications</h3>
<p>&quot;&quot;&quot;css
.publications-section {
  margin-top: var(--space-xl);
}</p>
<p>.pub-year-group {
  margin-bottom: var(--space-lg);
}</p>
<p>.pub-year {
  font-size: 1.25rem;
  color: var(--color-text-muted);
  margin-bottom: var(--space-md);
}</p>
<p>.pub-list {
  list-style: none;
  padding: 0;
}</p>
<p>.publication {
  margin-bottom: var(--space-md);
  line-height: 1.5;
}</p>
<p>.pub-title {
  font-weight: 500;
}</p>
<p>.pub-links a {
  font-size: 0.9rem;
  margin-right: var(--space-sm);
}
&quot;&quot;&quot;</p>
<hr>
<h2>JavaScript</h2>
<h3>theme.js (~15 lines)</h3>
<p>&quot;&quot;&quot;javascript
(function() {
  const toggle = document.querySelector(&#39;.theme-toggle&#39;);
  const html = document.documentElement;</p>
<p>  // Check saved preference or system preference
  const saved = localStorage.getItem(&#39;theme&#39;);
  const prefersDark = window.matchMedia(&#39;(prefers-color-scheme: dark)&#39;).matches;
  const initial = saved || (prefersDark ? &#39;dark&#39; : &#39;light&#39;);
  html.setAttribute(&#39;data-theme&#39;, initial);</p>
<p>  toggle.addEventListener(&#39;click&#39;, () =&gt; {
    const current = html.getAttribute(&#39;data-theme&#39;);
    const next = current === &#39;dark&#39; ? &#39;light&#39; : &#39;dark&#39;;
    html.setAttribute(&#39;data-theme&#39;, next);
    localStorage.setItem(&#39;theme&#39;, next);
  });
})();
&quot;&quot;&quot;</p>
<hr>
<h2>Build CLI</h2>
<h3>Usage</h3>
<p>&quot;&quot;&quot;bash</p>
<h1>Build site</h1>
<p>python build.py</p>
<h1>Build including drafts</h1>
<p>python build.py --drafts</p>
<h1>Clean output directory before build</h1>
<p>python build.py --clean</p>
<h1>Development server with live reload (v1.1)</h1>
<p>python build.py --serve
&quot;&quot;&quot;</p>
<h3>build.py Implementation</h3>
<p>&quot;&quot;&quot;python
#!/usr/bin/env python3
import argparse
from ssg.builder import Builder</p>
<p>def main():
    parser = argparse.ArgumentParser(description=&#39;Build static site&#39;)
    parser.add_argument(&#39;--drafts&#39;, action=&#39;store_true&#39;, help=&#39;Include draft posts&#39;)
    parser.add_argument(&#39;--clean&#39;, action=&#39;store_true&#39;, help=&#39;Clean output before build&#39;)
    parser.add_argument(&#39;--serve&#39;, action=&#39;store_true&#39;, help=&#39;Start dev server&#39;)  # v1.1
    args = parser.parse_args()</p>
<pre><code>builder = Builder(
    include_drafts=args.drafts,
    clean=args.clean
)
builder.build()

if args.serve:
    builder.serve()  # v1.1
</code></pre>
<p>if <strong>name</strong> == &#39;<strong>main</strong>&#39;:
    main()
&quot;&quot;&quot;</p>
<hr>
<h2>Python Module Specifications</h2>
<h3>ssg/config.py</h3>
<ul>
<li><code>load_config(path: str) -&gt; Config</code> â€” Load and validate config.yaml</li>
<li><code>Config</code> dataclass with typed fields</li>
<li>Raise <code>ConfigError</code> with helpful message for missing/invalid fields</li>
</ul>
<h3>ssg/content.py</h3>
<ul>
<li><code>Page</code> dataclass: title, subtitle, date, tags, draft, toc, slug, url, raw_content, html_content, section</li>
<li><code>Project</code> dataclass: title, description, image, links, order, content</li>
<li><code>Publication</code> dataclass: key, authors, title, venue, year, url, code</li>
<li><code>load_page(path: str, section: str) -&gt; Page</code></li>
<li><code>load_project(path: str) -&gt; Project</code></li>
<li><code>load_all_content(content_dir: str) -&gt; ContentIndex</code></li>
<li><code>ContentIndex</code> class with:<ul>
<li><code>pages: dict[str, Page]</code> â€” slug to page mapping</li>
<li><code>writing: list[Page]</code> â€” sorted by date</li>
<li><code>notes: list[Page]</code> â€” sorted by date</li>
<li><code>projects: list[Project]</code> â€” sorted by order</li>
<li><code>tags: dict[str, list[Page]]</code> â€” tag to pages mapping</li>
</ul>
</li>
</ul>
<h3>ssg/markdown_ext.py</h3>
<ul>
<li><code>MarkdownProcessor</code> class:<ul>
<li><code>__init__(page_registry: dict[str, Page], citation_registry: dict[str, Publication])</code></li>
<li><code>process(content: str, extract_toc: bool = False) -&gt; ProcessedContent</code></li>
</ul>
</li>
<li><code>ProcessedContent</code> dataclass: html, toc_html, bibliography_html, warnings</li>
<li>Internal methods:<ul>
<li><code>_transform_wiki_links(content: str) -&gt; str</code></li>
<li><code>_transform_citations(content: str) -&gt; str</code></li>
<li><code>_parse_markdown(content: str) -&gt; str</code></li>
<li><code>_post_process_callouts(html: str) -&gt; str</code></li>
<li><code>_post_process_figures(html: str) -&gt; str</code></li>
<li><code>_extract_toc(html: str) -&gt; tuple[str, str]</code> â€” returns (html_with_ids, toc_html)</li>
</ul>
</li>
</ul>
<h3>ssg/citations.py</h3>
<ul>
<li><code>load_bibtex(path: str) -&gt; dict[str, Publication]</code></li>
<li><code>format_citation(pub: Publication) -&gt; str</code> â€” formatted string for bibliography</li>
<li><code>format_inline_citation(pub: Publication) -&gt; str</code> â€” short form for tooltips</li>
</ul>
<h3>ssg/templates.py</h3>
<ul>
<li><code>TemplateEngine</code> class:<ul>
<li><code>__init__(templates_dir: str, config: Config)</code></li>
<li><code>render(template_name: str, **context) -&gt; str</code></li>
<li>Auto-includes config in all contexts</li>
<li>Custom Jinja2 filters: <code>slugify</code>, <code>date_format</code></li>
</ul>
</li>
</ul>
<h3>ssg/builder.py</h3>
<ul>
<li><code>Builder</code> class:<ul>
<li><code>__init__(include_drafts: bool = False, clean: bool = False)</code></li>
<li><code>build()</code> â€” main orchestration method</li>
<li><code>_load_all_content()</code></li>
<li><code>_process_all_markdown()</code></li>
<li><code>_render_static_pages()</code></li>
<li><code>_render_writing()</code></li>
<li><code>_render_notes()</code></li>
<li><code>_render_tags()</code></li>
<li><code>_copy_static_assets()</code></li>
<li><code>_write_file(path: str, content: str)</code></li>
</ul>
</li>
</ul>
<h3>ssg/utils.py</h3>
<ul>
<li><code>slugify(text: str) -&gt; str</code> â€” title to URL-safe slug</li>
<li><code>ensure_dir(path: str)</code> â€” create directory if not exists</li>
<li><code>copy_tree(src: str, dst: str)</code> â€” recursive copy</li>
<li><code>get_logger() -&gt; Logger</code> â€” configured logging</li>
<li><code>format_date(date: datetime, fmt: str) -&gt; str</code></li>
</ul>
<hr>
<h2>Output Structure</h2>
<p>&quot;&quot;&quot;
output/
â”œâ”€â”€ index.html                    # About page
â”œâ”€â”€ research/
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ writing/
â”‚   â”œâ”€â”€ index.html                # Writing listing
â”‚   â””â”€â”€ {slug}/
â”‚       â””â”€â”€ index.html            # Individual posts
â”œâ”€â”€ notes/
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ {slug}/
â”‚       â””â”€â”€ index.html
â”œâ”€â”€ tags/
â”‚   â”œâ”€â”€ index.html                # All tags
â”‚   â””â”€â”€ {tag-slug}/
â”‚       â””â”€â”€ index.html            # Tag page
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ images/
â”‚       â””â”€â”€ ...
â””â”€â”€ static/
    â”œâ”€â”€ css/
    â”‚   â””â”€â”€ style.css
    â””â”€â”€ js/
        â””â”€â”€ theme.js
&quot;&quot;&quot;</p>
<hr>
<h2>Error Handling</h2>
<ol>
<li><strong>Missing frontmatter fields</strong>: Error with filename and missing field name</li>
<li><strong>Invalid date format</strong>: Error with expected format (YYYY-MM-DD)</li>
<li><strong>Broken wiki links</strong>: Warning to console, continue build</li>
<li><strong>Missing BibTeX file</strong>: Warning, skip publications section</li>
<li><strong>Invalid BibTeX entry</strong>: Warning with entry key,</li>
</ol>

      </div>
      </div>
      
    </div>
  </body>
  </html>
  