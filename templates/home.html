{% extends "base.html" %}

{% block content %}
<article class="page home">
  <header class="page-header">
    <h1>{{ page.title }}</h1>
  </header>

  <div class="page-content prose">
    {{ page.html_content | safe }}
  </div>

  {% if featured_writing %}
  <section class="home-section">
    <h2>Featured Writing</h2>
    <ul class="post-list">
      {% for post in featured_writing %}
      <li class="post-item">
        <article>
          <a href="{{ post.url }}" class="post-link">
            <h3 class="post-title">{{ post.title }}</h3>
            {% if post.subtitle %}
            <p class="post-subtitle">{{ post.subtitle }}</p>
            {% endif %}
          </a>
          <div class="post-meta">
            {% if post.date %}
            <time datetime="{{ post.date.isoformat() }}">{{ post.date | date_format("%Y-%m-%d") }}</time>
            {% endif %}
          </div>
        </article>
      </li>
      {% endfor %}
    </ul>
  </section>
  {% endif %}

  {% if recent_writing %}
  <section class="home-section">
    <h2>Recent Writing</h2>
    <ul class="post-list home-recent-list">
      {% for post in recent_writing %}
      <li class="post-item">
        <article>
          <a href="{{ post.url }}" class="home-recent-link">
            {% if post.date %}
            <span class="home-recent-date">
              <time datetime="{{ post.date.isoformat() }}">{{ post.date | date_format("%Y-%m-%d") }}</time>
            </span>
            {% endif %}
            <span class="post-title home-recent-title">{{ post.title }}</span>
          </a>
        </article>
      </li>
      {% endfor %}
    </ul>
    <p><a href="/writing/">All writing →</a></p>
  </section>
  {% endif %}

  {% if publications %}
  <section class="home-section publications-section home-publications">
    <h2>{{ publications_title }}</h2>
    <ul class="pub-list">
      {% for pub in publications %}
      {% include "partials/publication.html" with context %}
      {% endfor %}
    </ul>
    <p><a href="/research/">Research →</a></p>
  </section>
  {% endif %}
</article>
{% endblock %}
